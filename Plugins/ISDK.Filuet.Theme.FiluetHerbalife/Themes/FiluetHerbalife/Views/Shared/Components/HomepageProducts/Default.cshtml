@model IList<ProductOverviewModel>
@if (Model.Count > 0)
{
    var category = await _categoryService.GetCategoryByIdAsync(_themeFiluetHerbalifeSettings.CategoryIdForCatalogue);
    var seName = await _urlRecordService.GetSeNameAsync(category);

    <section class="products block">
        <div class="cont">
            <div class="block_head padding_right">
                <div class="title">@T("Bestsellers")</div>

                <div class="all_link">
                    <a href="@Url.RouteUrl("Category", new { SeName = seName })">@T("ISDK.Filuet.Theme.FiluetHerbalife.ShowMoreGoods")</a>
                </div>
            </div>

            <div class="swiper-container carousel" id="products_slider1">

                <div class="swiper-wrapper">

                    @foreach (var item in Model)
                    {
                        <div class="slide swiper-slide">
                            @await Html.PartialAsync("_ProductBox", item)
                        </div>
                    }

                </div>

                <div class="swiper-button-prev">
                    <svg class="icon"><use xlink:href="@Url.Content("~/Themes/FiluetHerbalife/Content/images/sprite.svg#ic_arrow_left")"></use></svg>
                </div>

                <div class="swiper-button-next">
                    <svg class="icon"><use xlink:href="@Url.Content("~/Themes/FiluetHerbalife/Content/images/sprite.svg#ic_arrow_right")"></use></svg>
                </div>
            </div>

            <div class="mob_all_link">
                <a href="@Url.RouteUrl("Category", new { SeName = seName })">@T("ISDK.Filuet.Theme.FiluetHerbalife.ShowMoreGoods")</a>
            </div>
        </div>

    </section>
    <script type="text/javascript">
        $(
            $('.products .product .thumb img')
                .each((idx,img) => {
                    if(img.naturalHeight == 0) {
                        img.onload = evt => {
                            $(img).removeAttr('width');
                            setTimeout(() => {
                                img.height = img.parentElement.clientHeight;
                            }, 300);
                        };
                        return;
                    }
    
                    $(img).removeAttr('width');
                    setTimeout(() => {
                        img.height = img.parentElement.clientHeight;
                    }, 300);
                })
        );
    </script>
}
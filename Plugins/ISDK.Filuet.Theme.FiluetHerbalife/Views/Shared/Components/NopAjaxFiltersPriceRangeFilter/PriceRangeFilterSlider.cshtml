@** Copyright 2017 Seven Spikes Ltd. All rights reserved. (http://www.nop-templates.com)
    * http://www.nop-templates.com/t/licensinginfo
*@

@using SevenSpikes.Nop.Plugins.AjaxFilters.Domain
@model SevenSpikes.Nop.Plugins.AjaxFilters.Models.PriceRangeFilterSlider.PriceRangeFilterModel7Spikes
@inject NopAjaxFiltersSettings nopAjaxFiltersSettings

@{
    NopHtml.AddScriptParts(ResourceLocation.Footer, "~/Plugins/SevenSpikes.Nop.Plugins.AjaxFilters/Scripts/PriceRangeFilterSlider.min.js");
    NopHtml.AddScriptParts(ResourceLocation.Footer, "~/Plugins/SevenSpikes.Nop.Plugins.AjaxFilters/Scripts/jquery.ui.touch-punch.min.js");

    string toggleStateClass = "toggleControl";
    string toggleStateStyles = string.Empty;

    if (nopAjaxFiltersSettings.ClosePriceRangeFilterBox)
    {
        toggleStateClass = "toggleControl closed";
        toggleStateStyles = "display: none;";
    }

    bool isProgramm = false;
    var category = await _categoryService.GetCategoryByIdAsync(Model.CategoryId);
    if (category != null && category.ParentCategoryId > 0)
    {
        var categoryParent = await _categoryService.GetCategoryByIdAsync(category.ParentCategoryId);
        if (categoryParent != null && categoryParent.ParentCategoryId == _themeFiluetHerbalifeSettings.CategoryIdForProgramm)
        {
            isProgramm = true;
        }
    }
}

@*<div class="filter" style="margin-bottom: 15px; @(isProgramm ? "display: none;" : "")">*@
<div class="filter" style="margin-bottom: 15px; display: none;">
<form action="">
    <div class="item">
        <div class="name">@T("SevenSpikes.NopAjaxFilters.Client.PriceRangeFilter.Title")</div>

        <div class="data range price_range">
            <input type="hidden" id="price_range" name="price_range" value="">

            <div class="row">
                <div class="field">
                    <div class="prefix">@T("ISDK.Filuet.Theme.FiluetHerbalife.PriceFilterFrom")</div>
                    <input type="text" name="" value="@Model.SelectedPriceRange.From" class="input from">
                </div>

                <div class="field">
                    <div class="prefix">@T("ISDK.Filuet.Theme.FiluetHerbalife.PriceFilterTo")</div>
                    <input type="text" name="" value="@Model.SelectedPriceRange.To" class="input to">
                </div>
            </div>
        </div>
    </div>
</form>
</div>


<div class="block filter-block priceRangeFilterPanel7Spikes" data-currentcurrencysymbol="@Model.CurrencySymbol">
    <div class="title">
        <a class="@toggleStateClass">@T("SevenSpikes.NopAjaxFilters.Client.PriceRangeFilter.Title")</a>
        <a class="clearPriceRangeFilter">@T("SevenSpikes.NopAjaxFilters.Client.Common.Clear")</a>
    </div>
    <div class="filtersGroupPanel" style="@toggleStateStyles">
        <div class="priceRangeMinMaxPanel">
            <span class="priceRangeMinPanel">
                <span class="priceRangeMinPrice">@Model.MinPriceFormatted</span>
            </span>
            <span class="priceRangeMaxPanel">
                <span class="priceRangeMaxPrice">@Model.MaxPriceFormatted</span>
            </span>
        </div>
        <div id="slider" class="price-range-slider" data-sliderminvalue="@Model.MinPrice" data-slidermaxvalue="@Model.MaxPrice"
             data-selectedfromvalue="@Model.SelectedPriceRange.From" data-selectedtovalue="@Model.SelectedPriceRange.To"
             data-customformatting="@Model.Formatting">
        </div>
        <div class="priceRangeCurrentPricesPanel">
            <span class="currentMinPrice">@string.Concat(Model.CurrencySymbol, Model.SelectedPriceRange.From)</span>
            <span class="currentMaxPrice">@string.Concat(Model.CurrencySymbol, Model.SelectedPriceRange.To)</span>
        </div>
    </div>
</div>